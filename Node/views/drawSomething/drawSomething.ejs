<!DOCTYPE html>
<html>
<head>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
  <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/d3/3.3.11/d3.min.js"></script>
  <!-- // <script src="/js/gAnalytics.js"></script> -->
</head>
<body>
  <input type="number" id="brushSize" value="10"></input>
  <input type="number" id="opacity" value=".5"></input>
  <button id="reset">Reset</button>
<script type="text/javascript">
  var width = $(window).width(),
      height = $(window).height();

    var svg = d3.select("body").append("svg")
        .attr("width", width)
        .attr("height", height)
        .on("mousedown", mouseDown)
        .on("mouseup", mouseUp)

    var strokesContainer = [];

    function mouseDown () {
      svg.on('mousemove', function () {
        var coordinates = d3.mouse(this);

      var drawStrokeObj = svg.append("circle")
            .attr("cx", coordinates[0])
            .attr("cy", coordinates[1])
            .attr("r", size)
            .attr("stroke-width", 1)
            .attr("fill", color)
            .attr("opacity", opacity)

        // function drawNewObj (cx, cy, r, fill, opacity) {
        //     svg.append("circle")
        //     .attr("cx", cx)
        //     .attr("cy", cy)
        //     .attr("r", r)
        //     .attr("stroke-width", 1)
        //     .attr("fill", fill)
        //     .attr("opacity", opacity)
        // }
        

        // drawNewObj(parseInt(drawStrokeObj[0][0].attributes.cx.value) + 100, parseInt(drawStrokeObj[0][0].attributes.cy.value) + 100, drawStrokeObj[0][0].attributes.r.value, drawStrokeObj[0][0].attributes.fill.value, drawStrokeObj[0][0].attributes.opacity.value) 


        var obj = {
          cx: parseInt(drawStrokeObj[0][0].attributes.cx.value),
          cy: parseInt(drawStrokeObj[0][0].attributes.cy.value),
          r: drawStrokeObj[0][0].attributes.r.value,
          fill: drawStrokeObj[0][0].attributes.fill.value,
          opacity: drawStrokeObj[0][0].attributes.opacity.value
        }
        strokesContainer.push(obj)

       




          // console.log("cx is " + drawStrokeObj[0][0].attributes.cx.value)
          // console.log("cy is " + drawStrokeObj[0][0].attributes.cy.value)
          // console.log("r is " + drawStrokeObj[0][0].attributes.r.value)
          // console.log("fill is " + drawStrokeObj[0][0].attributes.fill.value)
          // console.log("opacity is " + drawStrokeObj[0][0].attributes.opacity.value)

      })
    }

    function mouseUp () {
      svg.on("mousemove", null)
      console.log(strokesContainer)

      function drawNewObj (obj) {
          svg.append("circle")
          .attr("cx", obj.cx + 100)
          .attr("cy", obj.cy + 100)
          .attr("r", obj.r)
          .attr("stroke-width", 1)
          .attr("fill", obj.fill)
          .attr("opacity", obj.opacity)
      }
      
      strokesContainer.forEach(function (obj) {
        drawNewObj(obj);
      })
      strokesContainer = []
      

    }
    var color = function () {
      return "blue"
    }
    var size = $('#brushSize').val()
    var opacity = $('#opacity').val()
    $(document).ready(function () {
      $('#brushSize').change(function () {
          size = $('#brushSize').val()
      }) 
      $('#opacity').change(function () {
          opacity = $('#opacity').val()
      }) 
      $('#reset').click(function () { 
          svg.selectAll("*").remove();
      })
    })

  
</script>
</body>
</html>
